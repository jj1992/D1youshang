require.config({
	paths : {
		"jquery" : "jquery-1.11.3",
		"cookie" : "jquery.cookie"
	}
})

//封装模块
require(['jquery','cookie'],function($,cookie){
	//验证码
	$(function(){
		$('.yzm').html('1314');
		$('.renovate').click(function(){
			var colors = (Math.floor(Math.random() * 0xffffff).toString(16)); 
			var str = '';
			for(var i = 0;i < 4;i ++){
					str += Math.floor(Math.random() * 10) || String.fromCharCode(Math.floor(Math.random() * (122 - 97 + 1)) + 97) || String.fromCharCode(Math.floor(Math.random() * (90 - 65 + 1)) + 65);
				}
			$('.yzm').html(str);
			$('.yzm').css('background',"#" + colors);
		})
	})
	
	
	//获取cookie
	$(function(){
		var cookieStr = $.cookie('msg');
		var cookieObj = convertCookieStrToCookieObj(cookieStr);
		$('#user').focus(function(){

			$('.yhm').css('display','none');
		})
		$('#pwd').focus(function(){
			$('.mm').css('display','none');
		})
		$('#loginBtn').click(function(){
			console.log($.cookie('msg'));
			var user = $('#user').val();
			var pwd = $('#pwd').val();
			
			for(us in cookieObj){
				if(user == us){			
					if(pwd == cookieObj[us]['pwd']){
//						alert('登录成功!');
						location.href = 'index2.html';
					}else{
//						alert('密码错误');
						$('.mm').css('display','inline-block');
					}
				}else{
//					alert('用户名错误');
					$('.yhm').css('display','inline-block');
				}
			}
		})
	})
	function convertCookieStrToCookieObj(str){
		if(!str){
			return {};
		}
		return JSON.parse(str);
	}
})